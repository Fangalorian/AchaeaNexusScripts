{"type":"group","name":"bal/eq timings","enabled":true,"id":1,"items":[{"type":"function","name":"onLoad","enabled":true,"id":2,"code":"timing = {\n    // Tracks if off bal\n    have_balance: true,\n    have_equilibrium: true,\n    \n    // Tracks when you went off bal\n    when_balance_lost: null,\n    when_equilibrium_lost: null,\n    \n    // Tracks how much time elapsed between going off bal and regaining bal\n    elapsed_eq: null,\n    elapsed_bal: null,\n};","items":[]},{"type":"function","name":"onGMCP","enabled":true,"id":3,"code":"// Place any code here you'd like to run when a GMCP message is received\n// - The GMCP message is received as \"args.gmcp_method\" and \"args.gmcp_args\"\n\nif (args.gmcp_method == 'Char.Vitals') { \n    \n    // Balance and Equilibrium timers\n    if (timing.have_balance && args.gmcp_args['bal'] == '0') {\n        timing.have_balance = false;\n        timing.when_balance_lost = performance.now();\n    }\n    \n    if (timing.have_equilibrium && args.gmcp_args['eq'] == '0') {\n        timing.have_equilibrium = false;\n        timing.when_equilibrium_lost = performance.now()\n    }\n}\n","items":[]},{"type":"alias","name":"Call onLoad","enabled":true,"id":158,"matching":"exact","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"function","fn":"onLoad"},{"action":"notify","notice":"Timing package onLoad function called!","notice_fg":"#ff0000","notice_bg":"#000000"}],"text":"load timing"},{"type":"trigger","name":"Regained: Eq","enabled":true,"id":156,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You have recovered equilibrium.","actions":[{"action":"script","script":"// Equilibrium recovery time printing\ntiming.have_equilibrium = true;\ntiming.elapsed_eq = ( performance.now() - timing.when_equilibrium_lost ) / 1000;\nreplace_current_line(current_text().length-1, 1, ' - '+timing.elapsed_eq.toFixed(2)+'s');\n"}],"items":[]},{"type":"trigger","name":"Regained: Bal","enabled":true,"id":157,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You have recovered balance on all limbs.","actions":[{"action":"script","script":"// Balance recovery time printing\ntiming.have_balance = true;\ntiming.elapsed_bal = ( performance.now() - timing.when_balance_lost ) / 1000;\nreplace_current_line(current_text().length-1, 1, ' - '+timing.elapsed_bal.toFixed(2)+'s');"}],"items":[]}],"description":"Adds elapsed time off bal to balance regained messages"}